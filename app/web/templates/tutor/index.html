{% extends "base.html" %}
{% block content %}
<div class="card">
  <div class="flex items-center justify-between">
    <h2 class="text-xl font-semibold">Tutor de Estudo</h2>
  </div>

  <!-- Importar PDF -->
  <div class="card mt-4">
    <h3 class="font-semibold mb-2">Importar PDF</h3>
    <p class="text-sm text-gray-500">Use para importar o arquivo, que aparecerá no bloco abaixo em forma de texto.</p>
    <input id="pdf_file_tutor" type="file" accept="application/pdf" class="input" />
    <button class="btn btn-ghost mt-2" onclick="uploadPdfTutor()">Ler PDF</button>
    <p id="pdf_msg_tutor" class="text-sm text-gray-600 mt-1"></p>
  </div>

  <!-- Form de criação manual de documento -->
  <div class="card mt-4">
    <form action="{{ request.url_for('upload') }}" method="post" enctype="multipart/form-data" class="space-y-2">
      <input class="input" name="title" placeholder="Título" />
      <textarea id="input_text_tutor" class="input h-48" name="text" placeholder="Cole o conteúdo aqui"></textarea>
      <button class="btn btn-ghost mt-2">Enviar</button>
      <p class="text-sm text-gray-500">Após enviar será redirecionado para a página do Resumo.</p>
    </form>
  </div>

  <!-- Lista de documentos do usuário -->
  <div class="card mt-4">
    <h2 class="text-xl font-semibold mb-2">Seus Documentos</h2>

    <ul class="space-y-4">
      {% for d in docs %}
      <li class="flex items-center justify-between">
        <div class="min-w-0">
          <div class="font-medium truncate">{{ d.title }}</div>
          <div class="text-sm text-gray-500">
            {{ d.created_at if d.created_at else '' }}
          </div>
        </div>
        <div class="flex items-center gap-2">
          <a class="btn btn-ghost"
             href="{{ request.url_for('doc_detail', doc_id=d.id) }}">
            Abrir resumo
          </a>
          <a class="btn btn-ghost"
             href="{{ request.url_for('study_get', doc_id=d.id) }}">
            Plano de estudo
          </a>
          <a class="btn btn-ghost"
             href="{{ request.url_for('quiz_select', doc_id=d.id) }}">
            Criar prova
          </a>
        </div>
      </li>
      {% else %}
      <li>Nenhum documento ainda.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
